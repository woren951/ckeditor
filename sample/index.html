<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>CKEditor 5 – classic editor build – development sample</title>
    <style>
        body {
            max-width: 800px;
            margin: 20px auto;
        }

    </style>
</head>

<body>

    <h1>CKEditor 5 – classic editor build – development sample</h1>

    <div id="editor">
        <h2>Sample</h2>

        <p>This is an instance of the <a
                href="https://docs.ckeditor.com/ckeditor5/latest/builds/guides/overview.html#classic-editor">classic
                editor build</a>.</p>

        <p>You can use this sample to validate whether your <a
                href="https://docs.ckeditor.com/ckeditor5/latest/builds/guides/development/custom-builds.html">custom
                build</a> works fine.</p>
    </div>

    <div id="word-count"></div>

    <script src="../build/ckeditor.js"></script>
    <!-- <script src="../node_modules/@ckeditor/ckeditor5-inspector/build/inspector.js"></script> -->

    <script>
        Ckeditor.create(document.querySelector('#editor'), {
            link: {
                decorators: {
                    addTargetToLinks: {
                        mode: 'manual',
                        label: 'Відкрити в новому вікні',
                        attributes: {
                            target: '_blank',
                            rel: 'noopener noreferrer'
                        }
                    },
                    detectDownloadable: {
                        mode: 'manual',
                        label: 'Завантажування',
                        attributes: {
                            download: 'download'
                        }
                    }
                }
            },
            mention: {
                feeds: [
                    {
                        marker: '@',
                        feed: ['@Barney', '@Lily', '@Marshall', '@Robin', '@Ted'],
                        minimumCharacters: 1
                    },
                    {
                        marker: ':',
                        feed: [':order', ':delivery'],
                        minimumCharacters: 2
                    }
                ]
            }
        })
        .then(editor => {
            // CKEditorInspector.attach( editor );

            const wordCountPlugin = editor.plugins.get( 'WordCount' );
            const wordCountWrapper = document.getElementById( 'word-count' );

            wordCountWrapper.appendChild( wordCountPlugin.wordCountContainer );

            editor.data.stringify = modelElementOrFragment => {
                const data = {
                    root: modelElementOrFragment.toJSON(),
                    children: Array.from( modelElementOrFragment.getChildren() ).map( child => child.toJSON() )
                };

                return JSON.stringify( data );
            };

            window.editor = editor;
        })
        .catch(err => {
            console.error(err.stack);
        });
    </script>

</body>

</html>
